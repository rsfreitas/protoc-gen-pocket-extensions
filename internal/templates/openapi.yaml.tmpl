# File generated by protoc-gen-krill-openapi. DO NOT EDIT.{{$openapi := .Openapi}}
openapi: 3.0.0
info:
  title: titulo {{/*toKebab $openapi.Info.Title*/}}
  version: version "{{/*$openapi.Info.Version*/}}"

servers:
  - url: https://example.com/

paths:
{{- range $name, $item := $openapi.PathItems}}
  {{$name}}:
{{- range $pathName, $operation := $item}}
    {{$pathName}}:
      {{- if gt (len $operation.Tags) 0}}
      tags:
      {{- range $tag := $operation.Tags}}
        - {{$tag}}
      {{- end}}
      {{- end}}
      summary: {{$operation.Summary}}
      description: {{$operation.Description}}
      operationId: {{$operation.Id}}
      {{- if gt (len $operation.SecuritySchemes) 0}}
      security:
      {{- range $secScheme := $operation.SecuritySchemes}}
      {{- range $secName, $scopes := $secScheme}}
        {{- if gt (len $scopes) 0}}
        - {{$secName}}:
          {{- range $scope := $scopes}}
          - "{{$scope}}"
          {{- end}}
        {{- else}}
        - {{$secName}}: []
        {{- end}}
      {{- end}}
      {{- end}} {{/* - range $secScheme := $operation.SecuritySchemes */}}
      {{- end}}
      {{- if gt (len $operation.Parameters) 0}}
      parameters:
      {{- range $operation.Parameters}}
        - in: {{.Location}}
          name: "{{.Name}}"
          required: {{.Required}}
          {{- if ne .Description ""}}
          description: {{.Description}}
          {{- end}}
          schema:
            {{.Schema.String 12}}
      {{- end}}
      {{- end}}
      {{- if $operation.HasRequestBody}}
      requestBody:
        required: {{$operation.RequestBody.Required}}
        description: {{$operation.RequestBody.Description}}
        content:
          {{- range $contentName, $content := $operation.RequestBody.Content}}
          {{$contentName}}:
            schema:
              {{$content.String 0}}
          {{- end}}
      {{- end}}
      responses:
      {{- range $name, $response := $operation.Responses}}
        '{{$name}}':
          description: {{$response.Description}}
          {{- if gt (len $response.Content) 0}}
          content:
          {{- range $contentName, $content := $response.Content}}
            {{$contentName}}:
              schema:
                {{$content.String 0}}
          {{- end}}
          {{- end}}
      {{- end}}
{{- end}}
{{- end}}

components:
  schemas:
  {{- range $name, $schema := $openapi.Components.Schemas}}
    {{$name}}:
      {{$schema.String 6}}
  {{- end}} {{/* range .Service.Schemas */}}
  {{- if gt (len $openapi.Components.Responses) 0}}
  responses:
  {{- range $name, $response := $openapi.Components.Responses}}
    {{$name}}:
      description: {{$response.Description}}
      {{- if gt (len $response.Content) 0}}
      content:
      {{- range $contentName, $content := $response.Content}}
        {{$contentName}}:
          schema:
            {{$content.String 0}}
      {{- end}}
      {{- end}}
  {{- end}}
  {{- end}}
  {{- if $openapi.HasAuth}}
  securitySchemes:
    authorization:
{{$openapi.SecurityScheme 6}}
  {{- end}}
